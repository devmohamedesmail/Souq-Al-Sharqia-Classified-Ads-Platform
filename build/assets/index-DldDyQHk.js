import{b as k,r as f,u as S,j as e}from"./app-Ct5iH9AX.js";import{T as $,M as F,F as I,B as R}from"./TopHeader-C47ExKmn.js";import{C as B}from"./CustomMultiSelect-DHa9_JJ5.js";import{e as M,i as T}from"./index-BaoV91dN.js";import{C as A}from"./Custommodal-B-IzNWtv.js";import{C as n,a as E}from"./CustomtextArea-Bnj66Lq3.js";import{u as P}from"./useTranslation-ByOnQA1x.js";/* empty css            */import"./index-DFovvOyG.js";import"./index-xPyQm-QK.js";import"./iconBase-C1nRxIP1.js";function W({places:_,categories:g,subcategories:D}){const{t:s,i18n:b}=P(),{flash:l}=k().props,d=f.useRef(null),{data:r,setData:o,post:j,processing:h,errors:t,reset:v}=S({name:"",email:"",phone:"",price:"",title:"",description:"",type:"",images:[],places:[],category_id:null,subcategory_id:null}),[m,c]=f.useState([]),y=a=>{if(a.target.files){const i=Array.from(a.target.files);o("images",i),c(i.map(u=>URL.createObjectURL(u)))}},p=g.find(a=>a.id===r.category_id),N=(p==null?void 0:p.subcategories)||[],w=a=>{a.preventDefault(),j(route("store.new.ads"),{onSuccess:()=>{v(),c([]),d.current&&d.current.showModal()}})};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx($,{}),e.jsx(F,{}),e.jsx("div",{className:"relative flex justify-center items-center py-8 px-4",children:e.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-gradient-to-r from-main to-sky-400 shadow-xl flex items-center gap-4 p-6 animate-fade-in-up",children:[e.jsx("div",{className:"flex-shrink-0 bg-white/80 rounded-full p-4 shadow-lg animate-bounce-slow",children:e.jsx(M,{className:"text-main text-3xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-2xl md:text-3xl font-bold mb-1",children:s("post_ad_form.post-your-ad-today")}),e.jsx("p",{className:"text-white/90 text-sm md:text-base",children:s("post_ad_form.banner-encourage-message")})]})]})}),e.jsx("div",{className:"flex justify-center items-center py-4",children:e.jsxs("form",{onSubmit:w,className:"bg-white shadow-2xl rounded-2xl p-8 w-full max-w-xl space-y-6 border border-main/10",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-main mb-4 tracking-wide",children:s("post_ad_form.add-new-ad")}),(l==null?void 0:l.success)&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-300 text-green-700 rounded-lg",children:l.success}),(l==null?void 0:l.error)&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg",children:l.error}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(n,{type:"text",name:"name",value:r.name,onChange:a=>o("name",a.target.value),className:`${t.name?"border-red-500":"border-red-700"}`,label:`${s("post_ad_form.name")} *`,error:t.name}),e.jsx(n,{label:s("post_ad_form.email"),name:"email",value:r.email,onChange:a=>o("email",a.target.value),error:t.email}),e.jsx(n,{label:`${s("post_ad_form.phone")} *`,name:"phone",value:r.phone,onChange:a=>o("phone",a.target.value),error:t.phone}),e.jsx(n,{label:s("post_ad_form.price"),type:"number",name:"price",value:r.price,onChange:a=>o("price",a.target.value),error:t.price})]}),e.jsx(n,{label:`${s("post_ad_form.ad-title")} *`,name:"title",value:r.title,onChange:a=>o("title",a.target.value),error:t.title}),e.jsx(E,{label:s("post_ad_form.ad-description"),name:"description",value:r.description,onChange:a=>o("description",a.target.value),error:t.description}),e.jsx(B,{label:`${s("post_ad_form.places")} *`,items:_,value:r.places,onChange:a=>o("places",a),valueKey:"id",labelKey:"name",error:t.places}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 font-semibold text-main",children:[s("post_ad_form.select-category")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:g.map(a=>e.jsxs("button",{type:"button",onClick:()=>{o({...r,category_id:a.id,subcategory_id:null})},className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition
                    ${r.category_id===a.id?"bg-main text-white border-main shadow":"bg-gray-50 border-gray-200 hover:border-main hover:bg-main/10"}
                  `,children:[e.jsx("img",{src:a.image,alt:a.title_en,className:"w-8 h-8 rounded-full border"}),e.jsx("span",{children:b.language==="ar"?a.title_ar:a.title_en})]},a.id))}),t.category_id&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:t.category_id})]}),r.category_id&&e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 font-semibold text-main",children:[s("post_ad_form.select-subcategory")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.subcategory_id!==null?r.subcategory_id:"",onChange:a=>o({...r,subcategory_id:a.target.value?Number(a.target.value):null}),className:"w-full border rounded px-3 py-2 focus:outline-main bg-gray-50",children:[e.jsx("option",{value:"",children:s("post_ad_form.select-subcategory")}),N.map(a=>e.jsx("option",{value:a.id,children:b.language==="ar"?a.title_ar:a.title_en},a.id))]}),t.subcategory_id&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:t.subcategory_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold text-main",children:s("post_ad_form.images")}),e.jsxs("div",{className:"w-full border-2 border-dashed border-main/40 rounded-lg p-4 bg-main/5 flex flex-col items-center justify-center cursor-pointer hover:bg-main/10 transition group",onClick:()=>{var a;return(a=document.getElementById("ad-images-input"))==null?void 0:a.click()},children:[e.jsx("input",{id:"ad-images-input",type:"file",name:"images",multiple:!0,accept:"image/*",onChange:y,className:"hidden"}),e.jsx("span",{className:"text-main font-medium group-hover:underline",children:s("post_ad_form.drag-images")}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:s("post_ad_form.select-many")})]}),m.length>0&&e.jsx("div",{className:"flex gap-3 mt-4 flex-wrap",children:m.map((a,i)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a,alt:"",className:"w-20 h-20 object-cover rounded-lg border-2 border-main/20 shadow"}),e.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),c(m.filter((C,x)=>x!==i)),o("images",r.images.filter((C,x)=>x!==i))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow hover:bg-red-600 transition",title:s("post_ad_form.remove"),children:e.jsx(T,{size:12})})]},i))})]}),e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-main text-white py-2 rounded font-semibold hover:bg-main/90 transition",children:s(h?"post_ad_form.publishing":"post_ad_form.publish")})]})}),e.jsx(A,{modalname:d,message:s("post_ad_form.ad-published-successfully")}),e.jsx(I,{}),e.jsx(R,{})]})}export{W as default};
