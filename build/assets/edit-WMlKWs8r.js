import{r as f,u as k,j as e}from"./app-Ct5iH9AX.js";import{T as F,M as R,F as S,B as I}from"./TopHeader-C47ExKmn.js";import{C as B}from"./CustomMultiSelect-DHa9_JJ5.js";import{e as E,i as M}from"./index-BaoV91dN.js";import{C as T}from"./Custommodal-B-IzNWtv.js";import{C as m,a as A}from"./CustomtextArea-Bnj66Lq3.js";import{u as D}from"./useTranslation-ByOnQA1x.js";/* empty css            */import"./index-DFovvOyG.js";import"./index-xPyQm-QK.js";import"./iconBase-C1nRxIP1.js";function V({ad:s,places:j,categories:x,subcategories:H}){const{t,i18n:h}=D(),d=f.useRef(null),{data:r,setData:i,post:v,processing:b,errors:l,reset:y}=k({name:s.name||"",email:s.email||"",phone:s.phone||"",price:s.price||"",title:s.title||"",description:s.description||"",type:s.type||"",images:s.images,places:s.places?s.places.map(a=>a.id):[],category_id:s.category_id||null,subcategory_id:s.subcategory_id||null}),[c,u]=f.useState(s.images.length?s.images:[]),w=a=>{if(a.target.files){const n=Array.from(a.target.files);i("images",[...r.images.filter(o=>typeof o=="string"),...n]),u([...c,...n.map(o=>URL.createObjectURL(o))])}},g=x.find(a=>a.id===r.category_id),N=(g==null?void 0:g.subcategories)||[],_=a=>{a.preventDefault(),v(route("edit.ad.confirm",[s.slug,s.id]),{forceFormData:!0,onSuccess:()=>{y(),u([]),d.current&&(d.current.close(),d.current.showModal())}})};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(F,{}),e.jsx(R,{}),e.jsx("div",{className:"relative flex justify-center items-center py-8 px-4",children:e.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-gradient-to-r from-main to-sky-400 shadow-xl flex items-center gap-4 p-6 animate-fade-in-up",children:[e.jsx("div",{className:"flex-shrink-0 bg-white/80 rounded-full p-4 shadow-lg animate-bounce-slow",children:e.jsx(E,{className:"text-main text-3xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-2xl md:text-3xl font-bold mb-1",children:t("edit-your-ad")}),e.jsx("p",{className:"text-white/90 text-sm md:text-base",children:t("edit-banner-message")})]})]})}),e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsxs("form",{onSubmit:_,className:"bg-white shadow-2xl rounded-2xl p-8 w-full max-w-xl space-y-6 border border-main/10",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-main mb-4 tracking-wide",children:t("edit-ad")}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(m,{label:t("name"),name:"name",value:r.name,onChange:a=>i("name",a.target.value),error:l.name}),e.jsx(m,{label:t("email"),name:"email",value:r.email,onChange:a=>i("email",a.target.value),error:l.email}),e.jsx(m,{label:t("phone"),name:"phone",value:r.phone,onChange:a=>i("phone",a.target.value),error:l.phone}),e.jsx(m,{label:t("price"),type:"number",name:"price",value:r.price,onChange:a=>i("price",a.target.value),error:l.price})]}),e.jsx(m,{label:t("ad-title"),name:"title",value:r.title,onChange:a=>i("title",a.target.value),error:l.title}),e.jsx(A,{label:t("post_ad_form.ad-description"),name:"description",placeholder:t("ad-description"),value:r.description,onChange:a=>i("description",a.target.value)}),e.jsx(B,{label:t("places"),items:j,value:r.places,onChange:a=>i("places",a),valueKey:"id",labelKey:"name",error:l.places}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold text-main",children:t("select-category")}),e.jsx("div",{className:"flex flex-wrap gap-3",children:x.map(a=>e.jsxs("button",{type:"button",onClick:()=>{i({...r,category_id:a.id,subcategory_id:null})},className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition
                    ${r.category_id===a.id?"bg-main text-white border-main shadow":"bg-gray-50 border-gray-200 hover:border-main hover:bg-main/10"}
                  `,children:[e.jsx("img",{src:a.image,alt:a.title_en,className:"w-8 h-8 rounded-full border"}),e.jsx("span",{children:h.language==="ar"?a.title_ar:a.title_en})]},a.id))})]}),r.category_id&&e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold text-main",children:t("select-subcategory")}),e.jsxs("select",{value:r.subcategory_id!==null?r.subcategory_id:"",onChange:a=>i({...r,subcategory_id:a.target.value?Number(a.target.value):null}),className:"w-full border rounded px-3 py-2 focus:outline-main bg-gray-50",children:[e.jsx("option",{value:"",children:t("select-subcategory")}),N.map(a=>e.jsx("option",{value:a.id,children:h.language==="ar"?a.title_ar:a.title_en},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold text-main",children:t("images")}),e.jsxs("div",{className:"w-full border-2 border-dashed border-main/40 rounded-lg p-4 bg-main/5 flex flex-col items-center justify-center cursor-pointer hover:bg-main/10 transition group",onClick:()=>{var a;return(a=document.getElementById("ad-images-input"))==null?void 0:a.click()},children:[e.jsx("input",{id:"ad-images-input",type:"file",name:"images",multiple:!0,accept:"image/*",onChange:w,className:"hidden"}),e.jsx("span",{className:"text-main font-medium group-hover:underline",children:t("drag-images")}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:t("select-many")})]}),c.length>0&&e.jsx("div",{className:"flex gap-3 mt-4 flex-wrap",children:c.map((a,n)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a,alt:"",className:"w-20 h-20 object-cover rounded-lg border-2 border-main/20 shadow"}),e.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),u(c.filter((C,p)=>p!==n)),i("images",r.images.filter((C,p)=>p!==n))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow hover:bg-red-600 transition",title:"Remove",children:e.jsx(M,{size:12})})]},n))})]}),e.jsx("button",{type:"submit",disabled:b,className:"w-full bg-main text-white py-2 rounded font-semibold hover:bg-main/90 transition",children:t(b?"saving":"save-changes")})]}),e.jsx(T,{modalname:d,message:t("ad-updated-successfully")})]}),e.jsx(S,{}),e.jsx(I,{})]})}export{V as default};
