import{r as o,u as I,j as e,H as T,L as c,a as B}from"./app-Ct5iH9AX.js";import{A as D}from"./app-layout-BBzKg2fL.js";import{a as G,F as _,b as L,c as H}from"./index-CDic93V-.js";import{G as M}from"./iconBase-C1nRxIP1.js";import{I as P}from"./input-DyqKkm7x.js";import{u as Z}from"./useTranslation-ByOnQA1x.js";/* empty css            */import"./app-logo-icon-0Yve0XtH.js";import"./index-DeWJKqnG.js";import"./index-hwo3dVWs.js";import"./index-DFovvOyG.js";import"./index-xPyQm-QK.js";function q(r){return M({attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"},child:[]}]})(r)}function te({ads:r}){const{t}=Z(),[a,p]=o.useState(""),[d,u]=o.useState(""),[l,g]=o.useState(""),[x,f]=o.useState(null),{data:n,setData:j,post:k,processing:m,errors:b,reset:N}=I({reason:""}),F=[{title:t("dashboard"),href:"/dashboard"},{title:t("ads"),href:"/users"}],h=r.filter(s=>{var y,w,v,C;const i=a===""||((y=s.title)==null?void 0:y.toLowerCase().includes(a.toLowerCase()))||((w=s.name)==null?void 0:w.toLowerCase().includes(a.toLowerCase()))||((v=s.email)==null?void 0:v.toLowerCase().includes(a.toLowerCase()))||((C=s.phone)==null?void 0:C.toLowerCase().includes(a.toLowerCase())),E=d===""||s.status===d,R=l===""||l==="true"&&s.featured==1||l==="false"&&s.featured!=1;return i&&E&&R}),S=s=>{confirm(`${t("confirm_delete_ad")} ${s.title}ØŸ`)&&B.get(`/delete/ad/${s.id}`,{})},$=s=>{var i;f(s),j("reason",""),N("reason"),(i=document.getElementById("reject_modal"))==null||i.showModal()},A=()=>{x&&n.reason.trim()?(console.log("Rejecting ad:",x.id,"with reason:",n.reason),k(`/reject/ad/${x.id}`,{onSuccess:()=>{var s;console.log("Ad rejected successfully"),(s=document.getElementById("reject_modal"))==null||s.close(),f(null),N()},onError:s=>{console.log("Error rejecting ad:",s)}})):console.log("Cannot reject ad - missing ad or reason")};return e.jsxs(D,{breadcrumbs:F,children:[e.jsx(T,{title:t("ads")}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6",children:[e.jsx("div",{className:"flex justify-between items-center bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 arabic-font",children:t("ads")}),e.jsx("p",{className:"text-gray-600 arabic-font",children:t("manage_ads")})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute mt-2 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(G,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:t("search_by_title_name_email_phone"),value:a,onChange:s=>p(s.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-main focus:border-main arabic-font"})]}),e.jsx("div",{children:e.jsxs("select",{value:d,onChange:s=>u(s.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-main focus:border-main arabic-font",children:[e.jsx("option",{value:"",children:t("all")}),e.jsx("option",{value:"pending",children:t("pending")}),e.jsx("option",{value:"approved",children:t("approved")}),e.jsx("option",{value:"rejected",children:t("rejected")})]})}),e.jsx("div",{children:e.jsxs("select",{value:l,onChange:s=>g(s.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-main focus:border-main arabic-font",children:[e.jsx("option",{value:"",children:t("all")}),e.jsx("option",{value:"true",children:t("featured")}),e.jsx("option",{value:"false",children:t("not_featured")})]})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{p(""),u(""),g("")},className:"w-full px-4 py-2 bg-main text-white rounded-md hover:bg-main-dark transition-colors arabic-font",children:t("clear_filters")})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 arabic-font",children:[t("ads_list")," (",h.length," ",t("of")," ",r.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-center arabic-font text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("name")}),e.jsx("th",{className:"px-6 py-3 text-center arabic-font text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("title")}),e.jsx("th",{className:"px-6 py-3 text-center arabic-font text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("type")}),e.jsx("th",{className:"px-6 py-3 text-center arabic-font text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("status")}),e.jsx("th",{className:"px-6 py-3 text-center arabic-font text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.length>0?h.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 text-center arabic-font",children:s.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-700 text-center arabic-font",children:s.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-700 text-center arabic-font",children:s.featured==1?e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:t("featured")}):e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:t("not_featured")})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-700 text-center arabic-font",children:[s.status==="pending"&&e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:t("pending")}),s.status==="approved"&&e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:t("approved")}),s.status==="rejected"&&e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:t("rejected")})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{className:"btn btn-primary",popoverTarget:`popover-${s.id}`,children:t("actions")}),e.jsxs("ul",{className:"dropdown dropdown-end menu w-52 rounded-box bg-base-100 shadow-sm",popover:"auto",id:`popover-${s.id}`,children:[e.jsx("li",{className:"py-1 bg-gray-100",children:e.jsxs(c,{href:`/ads/details/page/${s.id}`,className:"",children:[e.jsx(_,{className:"w-3 h-3"}),t("view")]})}),e.jsx("li",{className:"py-1 bg-gray-100",children:e.jsxs(c,{href:`/ads/publish/ad/${s.id}`,className:"",children:[e.jsx(_,{className:"w-3 h-3"}),t("publish")]})}),e.jsx("li",{className:"py-1 bg-gray-100",children:s.featured==1?e.jsxs(c,{href:`/boost/ad/${s.id}`,className:"",children:[e.jsx(L,{className:"w-3 h-3"}),t("admin_disboost")]}):e.jsxs(c,{href:`/boost/ad/${s.id}`,className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors",children:[e.jsx(L,{className:"w-3 h-3"}),t("admin_boost")]})}),e.jsx("li",{className:"py-1 bg-gray-100",children:e.jsxs("button",{onClick:()=>S(s),className:"",children:[e.jsx(H,{className:"w-3 h-3"}),t("delete")]})}),e.jsx("li",{className:"py-1 bg-gray-100",children:e.jsxs("button",{onClick:()=>$(s),className:"",children:[e.jsx(q,{className:"w-3 h-3"}),t("reject_ad")]})})]})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:e.jsx("div",{className:"text-gray-500",children:e.jsx("p",{className:"text-lg font-medium",children:t("no_ads_found")})})})})})]})})]}),e.jsxs("dialog",{id:"reject_modal",className:"modal",children:[e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg arabic-font",children:t("reject_ad")}),e.jsx("p",{className:"py-4 arabic-font",children:t("reject_ad_message")}),e.jsx(P,{value:n.reason,onChange:s=>j("reason",s.target.value),placeholder:t("enter_reject_reason"),className:"w-full mb-4"}),b.reason&&e.jsx("p",{className:"text-red-500 text-sm mb-2",children:b.reason}),e.jsxs("div",{className:"flex gap-2 justify-end mt-10",children:[e.jsx("button",{className:"btn btn-ghost arabic-font",onClick:()=>{var s;return(s=document.getElementById("reject_modal"))==null?void 0:s.close()},disabled:m,children:t("cancel")}),e.jsx("button",{className:"btn btn-primary arabic-font",onClick:A,disabled:!n.reason.trim()||m,children:t(m?"processing":"confirm")})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{children:"close"})})]})]})]})}export{te as default};
